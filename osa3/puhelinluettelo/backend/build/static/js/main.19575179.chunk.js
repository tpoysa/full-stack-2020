(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t.n(c),r=t(15),a=t.n(r),u=(t(6),t(3)),i=t(0),s=function(e){var n=e.filter,t=e.handler;return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:n,onChange:t})]})},l=function(e){return Object(i.jsxs)("form",{onSubmit:e.person,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:e.nameInput,onChange:e.nameHandler})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:e.numberInput,onChange:e.numberHandler})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.person,t=e.remove;return Object(i.jsxs)("li",{children:[n.name," ",n.number," ",Object(i.jsx)("button",{onClick:function(){return t(n.id,n.name)},children:"delete"})]})},d=function(e){var n=e.persons,t=e.filter,c=e.remove,o=""===t?n:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(i.jsx)("ul",{children:o.map((function(e){return Object(i.jsx)(f,{person:e,remove:c},e.name)}))})},j=t(4),b=t.n(j),h="/api/persons",m={getAll:function(){return b.a.get(h).then((function(e){return e.data}))},create:function(e){return b.a.post(h,e).then((function(e){return e.data}))},remove:function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))}},O=function(e){var n=e.message,t=e.type;return null===n?null:Object(i.jsx)("div",{className:"".concat(t),children:n})},p=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],r=Object(c.useState)(""),a=Object(u.a)(r,2),f=a[0],j=a[1],b=Object(c.useState)(""),h=Object(u.a)(b,2),p=h[0],v=h[1],g=Object(c.useState)(""),x=Object(u.a)(g,2),w=x[0],C=x[1],y=Object(c.useState)(null),I=Object(u.a)(y,2),S=I[0],A=I[1],L=Object(c.useState)(null),k=Object(u.a)(L,2),F=k[0],H=k[1];Object(c.useEffect)((function(){m.getAll().then((function(e){o(e)})).catch((function(e){console.log(e)}))}),[]);var T=function(e){A(e),setTimeout((function(){A(null)}),5e3)},D=function(e){H(e),setTimeout((function(){H(null)}),5e3)},P=function(e){return e.name.toLowerCase()===f.toLowerCase()};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(O,{message:S,type:"success"}),Object(i.jsx)(O,{message:F,type:"error"}),Object(i.jsx)(s,{filter:w,handler:function(e){return C(e.target.value)}}),Object(i.jsx)("h3",{children:"Add a new contact"}),Object(i.jsx)(l,{person:function(e){if(e.preventDefault(),t.some(P))if(window.confirm("".concat(f," is already added to the phonebook, replace the old number with a new one?"))){var n=[],c={name:f,number:p};m.getAll().then((function(e){n=e.filter(P),m.update(n[0].id,c).then((function(e){o(t.map((function(n){return n.id!==e.id?n:e}))),T("Updated ".concat(f))})).catch((function(e){console.log(e),D("Information of ".concat(f," has already been removed")),o(t.filter((function(e){return e.name!==f})))}))})).catch((function(e){console.log(e),D("Information of ".concat(f," has already been removed")),o(t.filter((function(e){return e.name!==f})))}))}else j(""),v("");else{var r={name:f,number:p};m.create(r).then((function(e){o(t.concat(e)),T("Added ".concat(e.name))})).catch((function(e){D(e.response.data.message)})),j(""),v("")}},nameInput:f,numberInput:p,nameHandler:function(e){return j(e.target.value)},numberHandler:function(e){return v(e.target.value)}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(d,{persons:t,filter:w,remove:function(e,n){window.confirm("Delete ".concat(n,"?"))&&m.remove(e).then((function(e){T("Removed ".concat(n)),m.getAll().then((function(e){o(e)})).catch((function(e){console.log("".concat(e,", error deleting ").concat(n))}))})).catch((function(e){console.log(e),D("Information of ".concat(n," has already been removed"))}))}})]})},v=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),o(e),r(e),a(e)}))};a.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(p,{})}),document.getElementById("root")),v()},6:function(e,n,t){}},[[39,1,2]]]);
//# sourceMappingURL=main.19575179.chunk.js.map